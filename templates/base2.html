<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Feijoada Shop{% endblock %}</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="static\styles.css">
</head>
<style>
    .card.product-card {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .card-img {
        width: 100%;
        height: 200px;
        /* você pode ajustar essa altura */
        object-fit: cover;
        /* faz o recorte elegante da imagem */
        border-top-left-radius: 0.5rem;
        border-top-right-radius: 0.5rem;
    }

    .card-grid {
        display: grid;
        gap: 1.5rem;
        grid-template-columns: repeat(3, 1fr);
        /* padrão: 3 por linha */
    }

    .card-img-top {
        transition: transform 0.3s ease;
    }

    .card:hover .card-img-top {
        transform: scale(1.05);
    }

    .btn-primary {
        background-color: #ff4d6d;
        border: none;
    }

    .btn-primary:hover {
        background-color: #e63956;
    }

    .custom-select {
        border-radius: 50px;
        padding: 0.5rem 1rem;
        border: 2px solid #ddd;
        background-color: #f8f9fa;
        font-weight: 500;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
    }

    .custom-select:focus {
        border-color: #ff4d6d;
        box-shadow: 0 0 0 0.25rem rgba(255, 77, 109, 0.25);
        outline: none;
    }

    .navbar {
        position: relative;
        z-index: 10;
    }


    @media (max-width: 768px) {
        .card-grid {
            grid-template-columns: repeat(2, 1fr);
            /* no celular: 2 por linha */
        }
    }

    @media (max-width: 480px) {
        .card-grid {
            grid-template-columns: 1fr;
            /* opcional: 1 por linha em telas muito pequenas */
        }
    }
</style>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a href="#" class="navbar-brand">Feijoada da Dayse</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="menu-toggle">
                </div>
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Início</a>
                    </li>
                </ul>
            </div>
        </div>

    </nav>

    <div class="container mt-5">
        {% block content %}{% endblock %}
    </div>
    <div style="margin-top: 400px;"></div>

    <!-- Footer -->
    <footer class="footer">
      <div class="container footer-container">
          <div class="footer-column">
              <h3>Feijoada da Dayse</h3>
              <p>Entregamos a melhor feijoada da cidade diretamente na sua casa.</p>
              <p>&copy; 2023 Feijoada da Dayse. Todos os direitos reservados.</p>
          </div>
          <div class="footer-column">
              <h3>Formas de Pagamento</h3>
              <div class="payment-methods">
                  <div class="payment-icon">PIX</div>
                  <div class="payment-icon">CARD</div>
                  <div class="payment-icon">CASH</div>
              </div>
          </div>
          <div class="footer-column">
              <h3>Siga-nos</h3>
              <p>Acompanhe nossas redes sociais para novidades, promoções e dicas.</p>
          </div>
      </div>
  </footer>
<script>
        // Navegação Mobile
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');

        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            navLinks.classList.toggle('active');
        });

        // Fechar menu ao clicar em um link
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                menuToggle.classList.remove('active');
                navLinks.classList.remove('active');
            });
        });

        // Animações de scroll
        function checkScroll() {
            const elements = document.querySelectorAll('.about-text, .menu-item, .testimonial');
            const windowHeight = window.innerHeight;

            elements.forEach(element => {
                const elementPosition = element.getBoundingClientRect().top;
                if (elementPosition < windowHeight - 100) {
                    element.classList.add('visible');
                }
            });
        }

        // Verificar posição inicial
        window.addEventListener('load', checkScroll);
        window.addEventListener('scroll', checkScroll);


        // Cálculo de preço em tempo real
        function setupPriceCalculation(radioName, checkboxName, totalPriceId) {
            const radioButtons = document.querySelectorAll(`input[name="${radioName}"]`);
            const checkboxes = document.querySelectorAll(`input[name="${checkboxName}"]`);
            const totalPriceElement = document.getElementById(totalPriceId);

            function updatePrice() {
                let basePrice = 0;
                let complementsPrice = 0;

                // Obter preço base do tamanho selecionado
                radioButtons.forEach(radio => {
                    if (radio.checked) {
                        basePrice = parseFloat(radio.dataset.price);
                    }
                });

                // Adicionar preço dos complementos
                checkboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        complementsPrice += parseFloat(checkbox.dataset.price);
                    }
                });

                // Atualizar total
                const total = basePrice + complementsPrice;
                totalPriceElement.textContent = total.toFixed(2);
            }

            // Event listeners
            radioButtons.forEach(radio => {
                radio.addEventListener('change', updatePrice);
            });

            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updatePrice);
            });
        }

        // Configurar cálculo de preço para cada item do cardápio
        setupPriceCalculation('size', 'complement', 'total-price');
        setupPriceCalculation('size-light', 'complement-light', 'total-price-light');
        setupPriceCalculation('size-vegana', 'complement-vegana', 'total-price-vegana');

        // Função para gerar mensagem de WhatsApp
        function setupWhatsAppOrder(buttonClass, radioName, checkboxName, productName, temperoId, arrozTipoId) {
            const button = document.querySelector(`.${buttonClass}`);

            button.addEventListener('click', () => {
                // Obter tamanho selecionado
                let tamanho = '';
                let preco = 0;
                document.querySelectorAll(`input[name="${radioName}"]`).forEach(radio => {
                    if (radio.checked) {
                        tamanho = radio.value;
                        preco = parseFloat(radio.dataset.price);
                    }
                });

                // Obter complementos selecionados
                const complementos = [];
                let complementosPreco = 0;
                document.querySelectorAll(`input[name="${checkboxName}"]`).forEach(checkbox => {
                    if (checkbox.checked) {
                        complementos.push(checkbox.value);
                        complementosPreco += parseFloat(checkbox.dataset.price);
                    }
                });

                // Obter personalizações
                const tempero = document.getElementById(temperoId).value;
                const arrozTipo = document.getElementById(arrozTipoId).value;

                // Calcular preço total
                const total = preco + complementosPreco;

                // Gerar mensagem
                let mensagem = `Olá! Gostaria de pedir: ${productName}, tamanho ${tamanho.charAt(0).toUpperCase() + tamanho.slice(1)}`;

                if (complementos.length > 0) {
                    const complementosFormatados = complementos.map(c => {
                        switch (c) {
                            case 'arroz': return 'arroz branco';
                            case 'couve': return 'couve refogada';
                            case 'farofa': return 'farofa da casa';
                            case 'laranja': return 'laranja em rodelas';
                            default: return c;
                        }
                    });
                    mensagem += `, com ${complementosFormatados.join(', ')}`;
                }

                mensagem += `. Tempero: ${tempero}. Tipo de arroz: ${arrozTipo}. Valor total: R$ ${total.toFixed(2)}`;

                // Abrir WhatsApp
                window.open(`https://wa.me/5511999999999?text=${encodeURIComponent(mensagem)}`, '_blank');
            });
        }

        // Configurar botões de WhatsApp
        setupWhatsAppOrder('whatsapp-order', 'size', 'complement', 'Feijoada Tradicional', 'tempero', 'arroz-tipo');
        setupWhatsAppOrder('whatsapp-order-light', 'size-light', 'complement-light', 'Feijoada Light', 'tempero-light', 'arroz-tipo-light');
        setupWhatsAppOrder('whatsapp-order-vegana', 'size-vegana', 'complement-vegana', 'Feijoada Vegana', 'tempero-vegana', 'arroz-tipo-vegana');

        // Botão flutuante de WhatsApp
        document.querySelector('.whatsapp-float').addEventListener('click', () => {
            window.open('https://wa.me/5528999656048?text=Olá! Gostaria de saber mais sobre a Feijoada da Dayse.', '_blank');
        });

        // Formulário de feedback
        document.getElementById('feedback-form').addEventListener('submit', function (e) {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;

            // Simulação de envio (em um site real, isso seria enviado para um servidor)
            alert(`Obrigado ${name}! Seu feedback foi enviado com sucesso.`);
            this.reset();
        });
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'939364d1519be12a',t:'MTc0NjE0NTY1Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
</body>

</html>